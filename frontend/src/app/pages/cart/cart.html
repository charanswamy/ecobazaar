<div class="min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 
                relative overflow-hidden py-10 px-4">


  <!-- Floating Orbs -->
  <!-- DARK BACKGROUND -->
<div class="absolute inset-0 -z-10 pointer-events-none">
   <div class="absolute top-8 -left-20 w-60 h-60 bg-emerald-400/25 rounded-full blur-3xl animate-pulse"></div>
    <div class="absolute bottom-0 right-0 w-56 h-56 bg-teal-500/20 rounded-full blur-3xl animate-pulse delay-1000"></div> 
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-lime-400/15 rounded-full blur-3xl animate-pulse delay-500"></div> </div>
     <div class="max-w-4xl mx-auto">


    <!-- Header -->
    <div class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-emerald-600 to-teal-600 
                   bg-clip-text text-transparent">
        Your Conscious Cart
      </h1>
      <p class="mt-2 text-lg text-gray-700">
        Every purchase helps create a greener future
      </p>
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="text-center py-20">
      <div class="inline-block animate-spin rounded-full h-14 w-14 border-4 border-emerald-500 border-t-transparent"></div>
      <p class="mt-6 text-xl text-gray-600">Loading your eco choices...</p>
    </div>

    <!-- Error -->
    <div *ngIf="error" class="text-center py-20">
      <p class="text-2xl font-bold text-red-600 mb-4">{{ error }}</p>
      <button (click)="loadCart()" 
              class="px-8 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold shadow">
        Try Again
      </button>
    </div>

    <!-- Empty Cart -->
    <div *ngIf="!loading && items.length === 0" class="text-center py-24">
      <div class="text-8xl mb-6 opacity-20">ðŸ›’</div>
      <p class="text-3xl font-bold text-gray-600 mb-3">Your cart is empty</p>
      <p class="text-lg text-gray-500 mb-6">Start choosing planet-friendly products</p>
      <a routerLink="/products"
         class="inline-block px-10 py-4 bg-emerald-600 hover:bg-emerald-700 text-white text-lg font-bold rounded-xl shadow">
        Browse Products
      </a>
    </div>

    <!-- ----------------------------- -->
    <!-- ORDER SUMMARY FIRST (FULL WIDTH) -->
    <!-- ----------------------------- -->
    <div *ngIf="!loading && items.length > 0"
         class="p-8 mb-10 rounded-3xl bg-gradient-to-br from-emerald-500 to-teal-600 
                text-white shadow-xl">

      <h2 class="text-3xl font-black mb-6 text-center">Order Summary</h2>

      <div class="space-y-4 text-lg">
        <div class="flex justify-between">
          <span>Subtotal</span>
          <span class="font-bold">â‚¹{{ totalPrice | number:'1.0-0' }}</span>
        </div>

        <div class="flex justify-between">
          <span>Total COâ‚‚ Impact</span>
          <span class="font-bold">{{ totalCarbon | number:'1.1-2' }} kg</span>
        </div>

        <div *ngIf="totalCarbonSaved > 0"
             class="p-5 bg-white/20 rounded-2xl text-center border border-white/30">
          <p class="text-2xl font-black">You Save</p>
          <p class="text-4xl font-black mt-1">{{ totalCarbonSaved | number:'1.1-2' }} kg COâ‚‚</p>
        </div>

        <div *ngIf="suggestedEcoProduct"
             class="p-5 bg-emerald-400/30 rounded-2xl text-center border border-emerald-300">
          <p class="text-lg font-bold mb-1">
            Switch to <span class="text-emerald-900">{{ suggestedEcoProduct.name }}</span>
          </p>
          <p class="text-3xl font-black">
            Save {{ suggestedEcoProduct.carbonSavings | number:'1.1-2' }} kg COâ‚‚
          </p>
          <button (click)="swapToEco()" 
                  class="mt-4 px-6 py-2 bg-white text-emerald-600 rounded-xl font-semibold shadow hover:scale-105 transition">
            Make the Switch
          </button>
        </div>
      </div>

      <!-- Checkout -->
      <button (click)="checkout()"
              class="w-full mt-8 py-4 text-xl font-black rounded-2xl bg-white text-emerald-700 
                     hover:bg-gray-100 shadow-lg transition flex items-center justify-center gap-2">
        Proceed to Checkout
      </button>

      <p class="mt-3 text-center text-xs opacity-80">Secure â€¢ Fast â€¢ Eco-Friendly</p>
    </div>

    <!-- ----------------------------- -->
    <!-- CART ITEMS BELOW -->
    <!-- ----------------------------- -->
    <div *ngIf="!loading && items.length > 0" class="space-y-6">
      <div *ngFor="let item of items; trackBy: trackByItemId"
           class="group flex items-center gap-4 p-6 rounded-2xl bg-white/90 
                  backdrop-blur-xl border border-emerald-100 shadow hover:shadow-xl 
                  transform hover:-translate-y-1 transition">

        <!-- Smaller Image -->
        <div class="relative">
          <img [src]="item.imageUrl || 'assets/placeholder.png'" 
               [alt]="item.productName"
               class="w-24 h-24 object-cover rounded-xl shadow" />
          <div *ngIf="item.ecoCertified"
               class="absolute -top-2 -right-2 bg-emerald-600 text-white 
                      px-3 py-1 rounded-full text-xs font-bold shadow animate-pulse">
            Eco
          </div>
        </div>

        <!-- Product Info -->
        <div class="flex-1">
          <h3 class="text-xl font-bold text-gray-900 group-hover:text-emerald-600 transition">
            {{ item.productName }}
          </h3>
          <p class="mt-1 text-gray-600 text-sm">
            Qty: <strong class="text-emerald-600">{{ item.quantity }}</strong>
          </p>
          <p class="mt-1 text-gray-600 text-sm">
            COâ‚‚: <strong class="text-orange-600">{{ item.carbonImpact * item.quantity | number:'1.1-2' }} kg</strong>
          </p>
          <p class="mt-2 text-2xl font-bold text-emerald-600">
            â‚¹{{ (item.price * item.quantity) | number:'1.0-0' }}
          </p>
        </div>

        <!-- Remove -->
        <button (click)="remove(item.id)"
                class="text-red-600 hover:text-red-700 font-semibold text-sm transition">
          Remove
        </button>
      </div>
    </div>

  </div>
</div>
